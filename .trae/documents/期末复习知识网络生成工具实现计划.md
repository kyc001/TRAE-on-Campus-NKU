# 期末复习知识网络生成工具实现计划

## 技术栈选择
- **前端**：React + TypeScript + Vite + 可视化库（react-flow或d3.js）
- **后端**：Node.js + Express
- **API集成**：豆包/即梦文档理解API + 大模型API
- **构建工具**：Vite

## 目录结构设计
```
├── frontend/          # 前端代码
│   ├── src/
│   │   ├── components/   # React组件
│   │   ├── hooks/        # 自定义hooks
│   │   ├── services/     # API服务
│   │   ├── types/        # TypeScript类型定义
│   │   ├── utils/        # 工具函数
│   │   ├── App.tsx       # 主应用组件
│   │   └── main.tsx      # 入口文件
│   ├── package.json
│   └── vite.config.ts
├── backend/           # 后端代码
│   ├── src/
│   │   ├── controllers/  # 控制器
│   │   ├── routes/       # 路由
│   │   ├── services/     # 业务逻辑
│   │   ├── utils/        # 工具函数
│   │   └── server.ts     # 服务器入口
│   └── package.json
├── docs/              # 项目文档
└── README.md          # 项目说明
```

## 核心模块实现

### 1. 后端服务（backend/）
- **文件上传接口**：接收PPT/PDF文件
- **文档处理服务**：调用豆包/即梦文档理解API解析文档
- **大模型调用服务**：将解析内容发送给大模型，生成结构化JSON
- **结果缓存机制**：处理API超时和失败情况

### 2. 前端应用（frontend/）
- **文件上传组件**：支持拖拽上传PPT/PDF文件
- **知识网络可视化组件**：
  - 树状结构展示
  - 节点展开/折叠交互
  - 节点点击详情查看
- **状态管理**：处理文件上传、API调用、结果展示等状态
- **错误处理**：友好的错误提示和降级方案

## 实现步骤

1. **项目初始化**
   - 创建frontend和backend目录
   - 初始化前端React + TypeScript + Vite项目
   - 初始化后端Node.js + Express项目

2. **后端核心功能开发**
   - 搭建Express服务器
   - 实现文件上传API
   - 集成文档理解API
   - 集成大模型API，实现结构化总结
   - 实现JSON结果验证和处理

3. **前端核心功能开发**
   - 实现文件上传界面
   - 集成后端API服务
   - 实现知识网络可视化组件
   - 添加交互功能（展开/折叠、详情查看等）

4. **测试和优化**
   - 测试端到端流程
   - 优化界面交互和性能
   - 实现错误处理和降级方案
   - 添加示例数据，确保演示效果

5. **文档完善**
   - 更新README.md
   - 完善handover.md
   - 添加使用说明

## 风险控制
- 文档解析失败：支持手动粘贴文本输入
- API调用超时：实现本地缓存和重试机制
- JSON解析异常：使用预设mock数据确保演示流畅
- 准备固定示例课件，确保Demo演示效果

## 核心API设计

### 后端API
- `POST /api/upload` - 文件上传
- `POST /api/process` - 处理文档并生成知识网络
- `GET /api/status/:id` - 查询处理状态

### 数据结构
```json
{
  "title": "课程名称",
  "summary": "课程简介",
  "children": [
    {
      "title": "模块A",
      "summary": "模块A简介",
      "children": [
        {
          "title": "核心概念A1",
          "summary": "概念A1描述",
          "children": []
        }
      ]
    }
  ]
}
```